<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>assets</title>

  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1226;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --bd: rgba(255,255,255,.10);
      --tx: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --muted2: rgba(255,255,255,.45);
      --shadow: 0 18px 70px rgba(0,0,0,.45);
      --r: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--tx);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "PingFang SC",
        "Hiragino Sans GB", "Microsoft YaHei", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1000px 600px at 15% 10%, rgba(167,139,250,.22), transparent 60%),
        radial-gradient(900px 600px at 80% 20%, rgba(59,130,246,.18), transparent 60%),
        radial-gradient(900px 700px at 50% 85%, rgba(236,72,153,.18), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    .wrap{ max-width: 1180px; margin: 0 auto; padding: 34px 18px 80px; }

    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 18px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      opacity:.95;
    }
    .dot{
      width:10px;height:10px;border-radius:99px;
      background: linear-gradient(135deg, #a78bfa, #60a5fa);
      box-shadow: 0 0 20px rgba(167,139,250,.35);
    }
    h1{
      margin:10px 0 6px;
      font-size: 44px;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color: var(--muted);
      line-height:1.6;
      max-width: 760px;
    }

    .btn{
      appearance:none;
      border:1px solid var(--bd);
      background: rgba(255,255,255,.06);
      color: var(--tx);
      padding: 10px 14px;
      border-radius: 999px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      gap:8px;
      align-items:center;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.20);
    }
    .btn:hover{ background: rgba(255,255,255,.10); }

    .searchRow{
      margin: 18px 0 20px;
      display:flex;
      gap:10px;
    }
    .search{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid var(--bd);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .search kbd{
      color: var(--muted2);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      border-bottom-color: rgba(255,255,255,.08);
      padding: 4px 8px;
      border-radius: 10px;
      font-size: 12px;
    }
    input{
      border:0;
      outline:0;
      background: transparent;
      color: var(--tx);
      font-size: 15px;
      width:100%;
    }
    input::placeholder{ color: var(--muted2); }

    .grid3{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }
    @media (max-width: 980px){
      .grid3{ grid-template-columns: 1fr; }
      h1{ font-size: 36px; }
      .top{ flex-direction:column; align-items:flex-start; }
    }

    .card{
      border: 1px solid var(--bd);
      background: var(--card);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 480px;
      max-height: 540px; /* 关键：卡片固定高度，内部滚动 */
      backdrop-filter: blur(14px);
    }
    .cardHead{
      padding: 16px 16px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .titleRow{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
    }
    .card h2{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .desc{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height:1.5;
    }

    .chips{
      margin-top: 10px;
      display:flex;
      gap: 8px;
      overflow-x:auto;      /* 关键：横向可滑 */
      white-space:nowrap;
      padding-bottom: 8px;
    }
    .chip{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.78);
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      cursor:pointer;
      user-select:none;
      flex: 0 0 auto;
    }
    .chip:hover{ background: rgba(255,255,255,.08); }

    .cardBody{
      padding: 14px 16px 16px;
      overflow-y:auto;      /* 关键：内部可上下滚动 */
    }

    .thumbGrid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 10px;
    }
    .thumbBox{
      position:relative;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      background: rgba(0,0,0,.20);
      cursor:pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.28);
    }
    .thumbBox:hover{ border-color: rgba(255,255,255,.18); transform: translateY(-1px); }
    .thumb{
      width:100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      display:block;
    }
    .thumbLabel{
      position:absolute;
      left: 10px;
      bottom: 10px;
      right: 10px;
      font-size: 11px;
      color: rgba(255,255,255,.72);
      text-shadow: 0 2px 12px rgba(0,0,0,.8);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      pointer-events:none;
    }

    .empty{
      color: var(--muted2);
      font-size: 13px;
      padding: 10px 2px;
      line-height:1.6;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      padding: 10px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.65);
      color: rgba(255,255,255,.92);
      box-shadow: 0 20px 80px rgba(0,0,0,.55);
      backdrop-filter: blur(12px);
      z-index: 9999;
      display:none;
      max-width: 90vw;
      text-align:center;
      font-size: 13px;
    }
    .hint{
      margin-top: 12px;
      color: var(--muted2);
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="top">
      <div>
        <div class="brand"><span class="dot"></span><span style="color:var(--muted)">assets · GitHub Pages</span></div>
        <h1>你的资源库</h1>
        <p class="sub">点任意缩略图或文件名即可复制直链。卡片内部可滚动（你有 24 张头像也能滑动选）。</p>
        <div class="hint">提示：键盘按 <b>/</b> 可以快速聚焦搜索框。</div>
      </div>
      <a class="btn" id="openRepo" target="_blank" rel="noreferrer">Open Repo</a>
    </div>

    <div class="searchRow">
      <div class="search">
        <kbd>/</kbd>
        <input id="q" placeholder="搜索文件名，比如：avatar-1 / logo / icon..." />
      </div>
    </div>

    <div class="grid3">
      <!-- Avatars -->
      <section class="card" data-group="avatars">
        <div class="cardHead">
          <div class="titleRow">
            <div>
              <h2>Avatars</h2>
              <div class="desc">头像（适合网站头像链接）</div>
            </div>
          </div>
          <div class="chips" id="chips-avatars"></div>
        </div>
        <div class="cardBody">
          <div class="thumbGrid" id="grid-avatars"></div>
          <div class="empty" id="empty-avatars" style="display:none">这里还没图片。把头像上传到 <b>avatars/</b> 下面即可。</div>
        </div>
      </section>

      <!-- Icons -->
      <section class="card" data-group="icons">
        <div class="cardHead">
          <div class="titleRow">
            <div>
              <h2>Icons</h2>
              <div class="desc">图标（小尺寸 / favicon / UI）</div>
            </div>
          </div>
          <div class="chips" id="chips-icons"></div>
        </div>
        <div class="cardBody">
          <div class="thumbGrid" id="grid-icons"></div>
          <div class="empty" id="empty-icons" style="display:none">这里还没图片。把图标上传到 <b>icons/</b> 下面即可。</div>
        </div>
      </section>

      <!-- Photos -->
      <section class="card" data-group="photos">
        <div class="cardHead">
          <div class="titleRow">
            <div>
              <h2>Photos</h2>
              <div class="desc">照片（展示图 / 背景图）</div>
            </div>
          </div>
          <div class="chips" id="chips-photos"></div>
        </div>
        <div class="cardBody">
          <div class="thumbGrid" id="grid-photos"></div>
          <div class="empty" id="empty-photos" style="display:none">这里还没图片。把照片上传到 <b>photos/</b> 下面即可。</div>
        </div>
      </section>
    </div>
  </div>

  <div class="toast" id="toast">已复制链接 ✅</div>

  <script>
    // ====== 你只需要维护这三个列表 ======
    // 按你现在 repo 的真实路径来：比如 avatars/avatar/avatar-1.jpg 就照写
    const DATA = {
      avatars: [
        // 示例：你可以把 24 张都写在这里（也可以用 index.json 方式，先别折腾）
        // "avatars/avatar/avatar-1.jpg",
      ],
      icons: [
        // "icons/icon-1.svg",
        // "icons/icon-2.png",
      ],
      photos: [
        // "photos/photo-1.jpg",
        // "photos/photo-2.jpg",
      ]
    };

    // 自动：如果你已经创建了 photos/index.json 这种数组文件，
    // 你也可以取消注释下面这段，让它自动读取（不想折腾就别动）
    async function tryLoadIndexJson(group){
      const p = group + "/index.json";
      try{
        const res = await fetch(p, { cache: "no-store" });
        if(!res.ok) return null;
        const arr = await res.json();
        if(!Array.isArray(arr)) return null;
        return arr.map(x => x.startsWith(group+"/") ? x : (group + "/" + x));
      }catch(e){
        return null;
      }
    }

    // GitHub Pages 直链基址：例如 https://byshelby.github.io/assets/
    const BASE = location.origin + location.pathname.replace(/\/index\.html$/, "/");

    function toast(msg){
      const el = document.getElementById("toast");
      el.textContent = msg;
      el.style.display = "block";
      clearTimeout(window.__t);
      window.__t = setTimeout(()=> el.style.display="none", 1200);
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("已复制链接 ✅");
      }catch(e){
        toast("复制失败：已弹出链接");
        alert(text);
      }
    }

    function isImage(path){
      return /\.(png|jpg|jpeg|gif|webp|svg)$/i.test(path);
    }

    function renderGroup(group, list){
      const chips = document.getElementById("chips-" + group);
      const grid  = document.getElementById("grid-" + group);
      const empty = document.getElementById("empty-" + group);

      chips.innerHTML = "";
      grid.innerHTML = "";

      const items = (list || []).filter(Boolean);

      if(items.length === 0){
        empty.style.display = "block";
        return;
      }
      empty.style.display = "none";

      // chips（文件名）
      for(const p of items){
        const name = p.split("/").pop();
        const c = document.createElement("div");
        c.className = "chip";
        c.textContent = name;
        c.title = "点击复制直链";
        c.dataset.path = p;
        c.onclick = () => copyText(BASE + p);
        chips.appendChild(c);
      }

      // thumbs（图片）
      for(const p of items){
        if(!isImage(p)) continue;
        const name = p.split("/").pop();

        const box = document.createElement("div");
        box.className = "thumbBox";
        box.title = "点击复制直链";
        box.dataset.path = p;
        box.onclick = () => copyText(BASE + p);

        const img = document.createElement("img");
        img.className = "thumb";
        img.loading = "lazy";
        img.src = p;
        img.alt = name;

        const label = document.createElement("div");
        label.className = "thumbLabel";
        label.textContent = name;

        box.appendChild(img);
        box.appendChild(label);
        grid.appendChild(box);
      }
    }

    // 搜索
    function applySearch(q){
      q = (q || "").trim().toLowerCase();
      for(const group of ["avatars","icons","photos"]){
        const list = (window.__all[group] || []);
        if(!q){
          renderGroup(group, list);
        }else{
          const filtered = list.filter(p => p.toLowerCase().includes(q));
          renderGroup(group, filtered);
        }
      }
    }

    // 快捷键：/ 聚焦搜索
    document.addEventListener("keydown", (e)=>{
      if(e.key === "/" && document.activeElement.tagName !== "INPUT"){
        e.preventDefault();
        document.getElementById("q").focus();
      }
    });

    // Open Repo 按钮：自动指向你当前 repo（如果是 Pages 部署）
    (function(){
      const btn = document.getElementById("openRepo");
      // 你也可以手动改成你的 repo 地址
      btn.href = "https://github.com/byShelby/assets";
    })();

    // 初始化：优先读取 index.json（有就用），否则用 DATA
    (async function init(){
      window.__all = { avatars:[], icons:[], photos:[] };

      for(const group of ["avatars","icons","photos"]){
        const fromJson = await tryLoadIndexJson(group);
        if(fromJson && fromJson.length){
          window.__all[group] = fromJson;
        }else{
          window.__all[group] = (DATA[group] || []);
        }
      }

      // 首次渲染
      applySearch("");

      // 绑定搜索
      const input = document.getElementById("q");
      input.addEventListener("input", () => applySearch(input.value));
    })();
  </script>
</body>
</html>
